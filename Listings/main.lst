C51 COMPILER V9.56.0.0   MAIN                                                              10/10/2017 20:27:36 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c LARGE OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listing
                    -s\main.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <c8051F120.h>
   2          #include <stdio.h>
   3          #include <math.h>
   4          #include <stdlib.h>
   5          #include <string.h>
   6          
   7          
   8          
   9          #define SYSTEM_CLOCK        24500000        ///< System clock frequency
  10          #define BAUD_RATE           115200
  11          #define RX_BUFFER_SIZE      256
  12          #define TX_BUFFER_SIZE      256
  13          
  14          #define TX_WAIT_LIMIT       100 * (SYSTEM_CLOCK / 1000000)
  15          #define RX_WAIT_LIMIT       100 * (SYSTEM_CLOCK / 1000000)
  16          
  17          sfr16 RCAP2 = 0xCA;
  18          sfr16 TMR2  = 0xCC;
  19          sfr16 RCAP3 = 0xCA;
  20          sfr16 TMR3  = 0xCC;
  21          sfr16 RCAP4 = 0xCA;
  22          sfr16 TMR4  = 0xCC;
  23          sfr16 DAC0  = 0xD2;
  24          sfr16 DAC1  = 0xD2;
  25          sfr16 ADC0  = 0xBE;
  26          sfr16 PCA0  = 0xF9;
  27          
  28          #define INTERRUPT_Timer_0           1
  29          #define INTERRUPT_Timer_1           3
  30          #define INTERRUPT_UART_0            4
  31          #define INTERRUPT_Timer_2           5
  32          #define INTERRUPT_SMB               7
  33          #define INTERRUPT_CPA               9
  34          #define INTERRUPT_COMP0_FALLING     10
  35          #define INTERRUPT_COMP0_RISING      11
  36          #define INTERRUPT_COMP1_FALLING     12
  37          #define INTERRUPT_COMP1_RISING      13
  38          #define INTERRUPT_Timer_3           14
  39          #define INTERRUPT_Timer_4           16
  40          #define INTERRUPT_ADC_0             15
  41          #define INTERRUPT_ADC_2             18
  42          
  43          
  44          
  45          void portIOInit(void)
  46          {
  47   1          char SFRPAGE_SAVE = SFRPAGE;
  48   1          SFRPAGE = CONFIG_PAGE;
  49   1          P0MDOUT   = 0x01;
  50   1          XBR0      = 0x04;
  51   1          XBR1      = 0x01;
  52   1          XBR2      = 0xC0;
  53   1          
  54   1          P0 = 0xFF;
C51 COMPILER V9.56.0.0   MAIN                                                              10/10/2017 20:27:36 PAGE 2   

  55   1          P1 = 0xFF;
  56   1          P2 = 0xFF;
  57   1          P3 = 0xFF;
  58   1          P4 = 0xFF;
  59   1          P5 = 0xFF;
  60   1          P6 = 0xFF;
  61   1          P7 = 0xFF;
  62   1      }
  63          
  64          void systemClockInit(void)
  65          {
  66   1          char SFRPAGE_SAVE = SFRPAGE;
  67   1          int i = 0;
  68   1          SFRPAGE = CONFIG_PAGE;
  69   1          OSCICN = 0x83;
  70   1          SFRPAGE = SFRPAGE_SAVE;
  71   1      }
  72          
  73          void TimerInit(void)
  74          {
  75   1          SFRPAGE   = TMR2_PAGE;
  76   1          TMR2CN    = 0x04;
  77   1          TMR2CF    = 0x08;
  78   1          RCAP2L    = 0xF3;
  79   1          RCAP2H    = 0xFF;
  80   1          TMR2      = RCAP2;
  81   1          TMR2CN    = 0x04;
  82   1      }
  83          
  84          void UARTInit(void)
  85          {
  86   1          SFRPAGE   = UART0_PAGE;
  87   1          SCON0     = 0x50;
  88   1          SSTA0     = 0x05;
  89   1      }
  90          
  91          void InterruptsInit(void)
  92          {
  93   1          IE        = 0x90;
  94   1      }
  95          
  96          void uart0Interrupt(void) interrupt INTERRUPT_UART_0 using 2
  97          {
  98   1          // TODO: From Canvas
  99   1      }
 100          
 101          int main(void)
 102          {
 103   1          systemClockInit();
 104   1          portIOInit();
 105   1          TimerInit();
 106   1          UARTInit();
 107   1          InterruptsInit();
 108   1          
 109   1          while(1) 
 110   1              {
 111   2              
 112   2              }       
 113   1      }
 114          
 115          
 116              
C51 COMPILER V9.56.0.0   MAIN                                                              10/10/2017 20:27:36 PAGE 3   



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    121    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----       3
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
